import{aV as j,aW as q,a as _,c as M,U as Y,F as D,aX as J,az as O,b as B,ae as C,d as Q,g as P,p as x,aY as h,au as F,aG as ee,r as E,aL as oe,J as ne,G as te,am as le,aZ as se,aQ as I}from"./index.9aa6671f.js";import{q as w,r as ae,s as ue,t as ie,i as de,U as R,g as k,a as re}from"./base.1e933585.js";import{g as ce}from"./scroll.9fd9eb4f.js";import{i as fe}from"./el-popper.d46c6f11.js";var p=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(p||{});const ye=(e,o={})=>{j(e)||q("[useLockscreen]","You need to pass a ref param to this function");const s=o.ns||_("popup"),i=M(()=>s.bm("parent","hidden"));if(!Y||w(document.body,i.value))return;let t=0,a=!1,n="0";const r=()=>{setTimeout(()=>{typeof document!="undefined"&&(ie(document==null?void 0:document.body,i.value),a&&document&&(document.body.style.width=n))},200)};D(e,c=>{if(!c){r();return}a=!w(document.body,i.value),a&&(n=document.body.style.width),t=ce(s.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,f=ae(document.body,"overflowY");t>0&&(u||f==="scroll")&&a&&(document.body.style.width=`calc(100% - ${t}px)`),ue(document.body,i.value)}),J(()=>r())},me=e=>{if(!e)return{onClick:O,onMousedown:O,onMouseup:O};let o=!1,s=!1;return{onClick:n=>{o&&s&&e(n),o=s=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{s=n.target===n.currentTarget}}},ve=B({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),Ee={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=Q({name:"ElOverlay",props:ve,emits:Ee,setup(e,{slots:o,emit:s}){const i=_(pe),t=c=>{s("click",c)},{onClick:a,onMousedown:n,onMouseup:r}=me(e.customMaskEvent?void 0:t);return()=>e.mask?P("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:n,onMouseup:r},[x(o,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):h("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const Me=Ce,Te=B({center:Boolean,alignCenter:Boolean,closeIcon:{type:de},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),De={close:()=>!0},Be=B({...Te,appendToBody:Boolean,appendTo:{type:C([String,Object]),default:"body"},beforeClose:{type:C(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Le={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[R]:e=>F(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ne=(e,o)=>{var s;const t=le().emit,{nextZIndex:a}=ee();let n="";const r=k(),c=k(),u=E(!1),f=E(!1),v=E(!1),T=E((s=e.zIndex)!=null?s:a());let y,m;const z=oe("namespace",se),H=M(()=>{const l={},d=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(l[`${d}-margin-top`]=e.top),e.width&&(l[`${d}-width`]=re(e.width))),l}),G=M(()=>e.alignCenter?{display:"flex"}:{});function U(){t("opened")}function V(){t("closed"),t(R,!1),e.destroyOnClose&&(v.value=!1)}function g(){t("close")}function L(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=I(()=>N(),e.openDelay):N()}function S(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=I(()=>A(),e.closeDelay):A()}function b(){function l(d){d||(f.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(l):S()}function K(){e.closeOnClickModal&&b()}function N(){!Y||(u.value=!0)}function A(){u.value=!1}function W(){t("openAutoFocus")}function $(){t("closeAutoFocus")}function X(l){var d;((d=l.detail)==null?void 0:d.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&ye(u);function Z(){e.closeOnPressEscape&&b()}return D(()=>e.modelValue,l=>{l?(f.value=!1,L(),v.value=!0,T.value=fe(e.zIndex)?a():T.value++,ne(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):u.value&&S()}),D(()=>e.fullscreen,l=>{!o.value||(l?(n=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=n)}),te(()=>{e.modelValue&&(u.value=!0,v.value=!0,L())}),{afterEnter:U,afterLeave:V,beforeLeave:g,handleClose:b,onModalClick:K,close:S,doClose:A,onOpenAutoFocus:W,onCloseAutoFocus:$,onCloseRequested:Z,onFocusoutPrevented:X,titleId:r,bodyId:c,closed:f,style:H,overlayDialogStyle:G,rendered:v,visible:u,zIndex:T}};export{Me as E,Le as a,Te as b,De as c,Be as d,me as e,Ne as u};
