import{ab as ce,z as te,ax as fe,ad as me,a8 as ve,bm as pe,y as K,Q as ye,ag as X,b as q,d as F,a as H,k as z,l as b,aQ as Ce,J,c as N,o as O,A as G,f as U,n as T,u as o,t as Ee,w as M,e as W,h as be,i as P,g as se,r as h,a3 as ge,G as Te,R as Se,ap as ke,L as De,C as we,D as Ae,m as Me,aK as he,ak as Le,al as Ie,p as Be}from"./index.5abe98c9.js";import{a as j,u as x,b as ne,A as Q,C as Oe,z as Ne,B as Re,i as $e,E as Ye,_ as le,D as _e,c as ze,k as He,l as Z,e as Ue,w as ee,m as oe}from"./base.f53242fc.js";import{a as Ve,F as Xe,d as Ge}from"./el-popper.ce331693.js";import{t as Ke,U as ae}from"./el-input.3ea4f725.js";import{g as Fe}from"./el-checkbox.750bba3b.js";const We=(...e)=>t=>{e.forEach(n=>{ce(n)?n(t):n.value=t})};var V=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(V||{});const re=Symbol("dialogInjectionKey"),Pe=(e,t,n)=>{let r={offsetX:0,offsetY:0};const i=a=>{const d=a.clientX,v=a.clientY,{offsetX:m,offsetY:p}=r,s=e.value.getBoundingClientRect(),f=s.left,S=s.top,R=s.width,$=s.height,Y=document.documentElement.clientWidth,L=document.documentElement.clientHeight,_=-f+m,I=-S+p,k=Y-f-R+m,D=L-S-$+p,B=g=>{const l=Math.min(Math.max(m+g.clientX-d,_),k),E=Math.min(Math.max(p+g.clientY-v,I),D);r={offsetX:l,offsetY:E},e.value.style.transform=`translate(${j(l)}, ${j(E)})`},y=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",y)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)};te(()=>{fe(()=>{n.value?c():u()})}),me(()=>{u()})},je=e=>{ve(e)||Ke("[useLockscreen]","You need to pass a ref param to this function");const t=x("popup"),n=pe(()=>t.bm("parent","hidden"));if(!ne||Q(document.body,n.value))return;let r=0,i=!1,c="0";const u=()=>{setTimeout(()=>{Re(document.body,n.value),i&&(document.body.style.width=c)},200)};K(e,a=>{if(!a){u();return}i=!Q(document.body,n.value),i&&(c=document.body.style.width),r=Fe(t.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,v=Oe(document.body,"overflowY");r>0&&(d||v==="scroll")&&i&&(document.body.style.width=`calc(100% - ${r}px)`),Ne(document.body,n.value)}),ye(()=>u())},ue=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,n=!1;return{onClick:u=>{t&&n&&e(u),t=n=!1},onMousedown:u=>{t=u.target===u.currentTarget},onMouseup:u=>{n=u.target===u.currentTarget}}},qe=q({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:F([String,Array,Object])},zIndex:{type:F([String,Number])}}),xe={click:e=>e instanceof MouseEvent};var Je=H({name:"ElOverlay",props:qe,emits:xe,setup(e,{slots:t,emit:n}){const r=x("overlay"),i=d=>{n("click",d)},{onClick:c,onMousedown:u,onMouseup:a}=ue(e.customMaskEvent?void 0:i);return()=>e.mask?z("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:u,onMouseup:a},[b(t,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):Ce("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(t,"default")])}});const Qe=Je,ie=q({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:$e},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ze={close:()=>!0},eo=["aria-label"],oo=["id"],to=H({name:"ElDialogContent"}),so=H({...to,props:ie,emits:Ze,setup(e){const t=e,{t:n}=Ve(),{Close:r}=_e,{dialogRef:i,headerRef:c,bodyId:u,ns:a,style:d}=J(re),{focusTrapRef:v}=J(Xe),m=We(v,i),p=N(()=>t.draggable);return Pe(i,c,p),(s,f)=>(O(),G("div",{ref:o(m),class:T([o(a).b(),o(a).is("fullscreen",s.fullscreen),o(a).is("draggable",o(p)),o(a).is("align-center",s.alignCenter),{[o(a).m("center")]:s.center},s.customClass]),style:se(o(d)),tabindex:"-1"},[U("header",{ref_key:"headerRef",ref:c,class:T(o(a).e("header"))},[b(s.$slots,"header",{},()=>[U("span",{role:"heading",class:T(o(a).e("title"))},Ee(s.title),3)]),s.showClose?(O(),G("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:T(o(a).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=S=>s.$emit("close"))},[z(o(Ye),{class:T(o(a).e("close"))},{default:M(()=>[(O(),W(be(s.closeIcon||o(r))))]),_:1},8,["class"])],10,eo)):P("v-if",!0)],2),U("div",{id:o(u),class:T(o(a).e("body"))},[b(s.$slots,"default")],10,oo),s.$slots.footer?(O(),G("footer",{key:0,class:T(o(a).e("footer"))},[b(s.$slots,"footer")],2)):P("v-if",!0)],6))}});var no=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=q({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:F(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ro=(e,t)=>{const r=Se().emit,{nextZIndex:i}=He();let c="";const u=Z(),a=Z(),d=h(!1),v=h(!1),m=h(!1),p=h(e.zIndex||i());let s,f;const S=ge("namespace",Ue),R=N(()=>{const C={},A=`--${S.value}-dialog`;return e.fullscreen||(e.top&&(C[`${A}-margin-top`]=e.top),e.width&&(C[`${A}-width`]=j(e.width))),C}),$=N(()=>e.alignCenter?{display:"flex"}:{});function Y(){r("opened")}function L(){r("closed"),r(ae,!1),e.destroyOnClose&&(m.value=!1)}function _(){r("close")}function I(){f==null||f(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=ee(()=>y(),e.openDelay):y()}function k(){s==null||s(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=ee(()=>g(),e.closeDelay):g()}function D(){function C(A){A||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(C):k()}function B(){e.closeOnClickModal&&D()}function y(){!ne||(d.value=!0)}function g(){d.value=!1}function l(){r("openAutoFocus")}function E(){r("closeAutoFocus")}function w(C){var A;((A=C.detail)==null?void 0:A.focusReason)==="pointer"&&C.preventDefault()}e.lockScroll&&je(d);function de(){e.closeOnPressEscape&&D()}return K(()=>e.modelValue,C=>{C?(v.value=!1,I(),m.value=!0,p.value=e.zIndex?p.value++:i(),Te(()=>{r("open"),t.value&&(t.value.scrollTop=0)})):d.value&&k()}),K(()=>e.fullscreen,C=>{!t.value||(C?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),te(()=>{e.modelValue&&(d.value=!0,m.value=!0,I())}),{afterEnter:Y,afterLeave:L,beforeLeave:_,handleClose:D,onModalClick:B,close:k,doClose:g,onOpenAutoFocus:l,onCloseAutoFocus:E,onCloseRequested:de,onFocusoutPrevented:w,titleId:u,bodyId:a,closed:v,style:R,overlayDialogStyle:$,rendered:m,visible:d,zIndex:p}},uo=["aria-label","aria-labelledby","aria-describedby"],io=H({name:"ElDialog",inheritAttrs:!1}),co=H({...io,props:lo,emits:ao,setup(e,{expose:t}){const n=e,r=ke();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},N(()=>!!r.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},N(()=>!!n.customClass));const i=x("dialog"),c=h(),u=h(),a=h(),{visible:d,titleId:v,bodyId:m,style:p,overlayDialogStyle:s,rendered:f,zIndex:S,afterEnter:R,afterLeave:$,beforeLeave:Y,handleClose:L,onModalClick:_,onOpenAutoFocus:I,onCloseAutoFocus:k,onCloseRequested:D,onFocusoutPrevented:B}=ro(n,c);De(re,{dialogRef:c,headerRef:u,bodyId:m,ns:i,rendered:f,style:p});const y=ue(_),g=N(()=>n.draggable&&!n.fullscreen);return t({visible:d,dialogContentRef:a}),(l,E)=>(O(),W(Ie,{to:"body",disabled:!l.appendToBody},[z(Le,{name:"dialog-fade",onAfterEnter:o(R),onAfterLeave:o($),onBeforeLeave:o(Y),persisted:""},{default:M(()=>[we(z(o(Qe),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(S)},{default:M(()=>[U("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(m),class:T(`${o(i).namespace.value}-overlay-dialog`),style:se(o(s)),onClick:E[0]||(E[0]=(...w)=>o(y).onClick&&o(y).onClick(...w)),onMousedown:E[1]||(E[1]=(...w)=>o(y).onMousedown&&o(y).onMousedown(...w)),onMouseup:E[2]||(E[2]=(...w)=>o(y).onMouseup&&o(y).onMouseup(...w))},[z(o(Ge),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(I),onFocusAfterReleased:o(k),onFocusoutPrevented:o(B),onReleaseRequested:o(D)},{default:M(()=>[o(f)?(O(),W(no,Me({key:0,ref_key:"dialogContentRef",ref:a},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(g),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(L)}),he({header:M(()=>[l.$slots.title?b(l.$slots,"title",{key:1}):b(l.$slots,"header",{key:0,close:o(L),titleId:o(v),titleClass:o(i).e("title")})]),default:M(()=>[b(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:M(()=>[b(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):P("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ae,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Eo=Be(fo);export{Eo as E};
