import{ar as _,G,aX as J,au as Q,d as P,e as Z,K as q,c as D,o as E,l as z,j as F,p as g,n as f,h as e,t as x,g as I,w as m,f as O,A as ee,q as j,z as H,u as oe,a as se,r as K,N as te,T as ae,i as le,m as ne,bE as re,v as ie,x as de}from"./index.6e34900c.js";import{b as ce,c as ue,d as fe,a as me,u as ve,e as pe,E as ge}from"./use-dialog.d3c5468c.js";import{F as he,E as be,a as ye}from"./el-popper.67d0705d.js";import{a as U,E as Ce,_ as V,K as Ee,u as we}from"./base.45a05a23.js";const ke=(...l)=>n=>{l.forEach(t=>{_(t)?t(n):t.value=n})},Le=(l,n,t,h)=>{let r={offsetX:0,offsetY:0};const i=v=>{const y=v.clientX,w=v.clientY,{offsetX:p,offsetY:c}=r,u=l.value.getBoundingClientRect(),C=u.left,a=u.top,T=u.width,k=u.height,R=document.documentElement.clientWidth,S=document.documentElement.clientHeight,B=-C+p,X=-a+c,Y=R-C-T+p,L=S-a-k+c,M=o=>{let $=p+o.clientX-y,A=c+o.clientY-w;h!=null&&h.value||($=Math.min(Math.max($,B),Y),A=Math.min(Math.max(A,X),L)),r={offsetX:$,offsetY:A},l.value&&(l.value.style.transform=`translate(${U($)}, ${U(A)})`)},N=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",N)},b=()=>{n.value&&l.value&&n.value.addEventListener("mousedown",i)},d=()=>{n.value&&l.value&&n.value.removeEventListener("mousedown",i)},s=()=>{r={offsetX:0,offsetY:0},l.value&&(l.value.style.transform="none")};return G(()=>{J(()=>{t.value?b():d()})}),Q(()=>{d()}),{resetPosition:s}},W=Symbol("dialogInjectionKey"),$e=P({name:"ElDialogContent"}),De=P({...$e,props:ce,emits:ue,setup(l,{expose:n}){const t=l,{t:h}=Z(),{Close:r}=Ee,{dialogRef:i,headerRef:b,bodyId:d,ns:s,style:v}=q(W),{focusTrapRef:y}=q(he),w=D(()=>[s.b(),s.is("fullscreen",t.fullscreen),s.is("draggable",t.draggable),s.is("align-center",t.alignCenter),{[s.m("center")]:t.center}]),p=ke(y,i),c=D(()=>t.draggable),u=D(()=>t.overflow),{resetPosition:C}=Le(i,b,c,u);return n({resetPosition:C}),(a,T)=>(E(),z("div",{ref:e(p),class:f(e(w)),style:H(e(v)),tabindex:"-1"},[F("header",{ref_key:"headerRef",ref:b,class:f([e(s).e("header"),{"show-close":a.showClose}])},[g(a.$slots,"header",{},()=>[F("span",{role:"heading","aria-level":a.ariaLevel,class:f(e(s).e("title"))},x(a.title),11,["aria-level"])]),a.showClose?(E(),z("button",{key:0,"aria-label":e(h)("el.dialog.close"),class:f(e(s).e("headerbtn")),type:"button",onClick:k=>a.$emit("close")},[I(e(Ce),{class:f(e(s).e("close"))},{default:m(()=>[(E(),O(ee(a.closeIcon||e(r))))]),_:1},8,["class"])],10,["aria-label","onClick"])):j("v-if",!0)],2),F("div",{id:e(d),class:f(e(s).e("body"))},[g(a.$slots,"default")],10,["id"]),a.$slots.footer?(E(),z("footer",{key:0,class:f(e(s).e("footer"))},[g(a.$slots,"footer")],2)):j("v-if",!0)],6))}});var Te=V(De,[["__file","dialog-content.vue"]]);const Me=P({name:"ElDialog",inheritAttrs:!1}),Ae=P({...Me,props:fe,emits:me,setup(l,{expose:n}){const t=l,h=oe();we({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},D(()=>!!h.title));const r=se("dialog"),i=K(),b=K(),d=K(),{visible:s,titleId:v,bodyId:y,style:w,overlayDialogStyle:p,rendered:c,zIndex:u,afterEnter:C,afterLeave:a,beforeLeave:T,handleClose:k,onModalClick:R,onOpenAutoFocus:S,onCloseAutoFocus:B,onCloseRequested:X,onFocusoutPrevented:Y}=ve(t,i);te(W,{dialogRef:i,headerRef:b,bodyId:y,ns:r,rendered:c,style:w});const L=pe(R),M=D(()=>t.draggable&&!t.fullscreen);return n({visible:s,dialogContentRef:d,resetPosition:()=>{var o;(o=d.value)==null||o.resetPosition()}}),(o,$)=>(E(),O(e(ye),{to:o.appendTo,disabled:o.appendTo!=="body"?!1:!o.appendToBody},{default:m(()=>[I(ae,{name:"dialog-fade",onAfterEnter:e(C),onAfterLeave:e(a),onBeforeLeave:e(T),persisted:""},{default:m(()=>[le(I(e(ge),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(u)},{default:m(()=>[F("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(v),"aria-describedby":e(y),class:f(`${e(r).namespace.value}-overlay-dialog`),style:H(e(p)),onClick:e(L).onClick,onMousedown:e(L).onMousedown,onMouseup:e(L).onMouseup},[I(e(be),{loop:"",trapped:e(s),"focus-start-el":"container",onFocusAfterTrapped:e(S),onFocusAfterReleased:e(B),onFocusoutPrevented:e(Y),onReleaseRequested:e(X)},{default:m(()=>[e(c)?(E(),O(Te,ne({key:0,ref_key:"dialogContentRef",ref:d},o.$attrs,{center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:e(M),overflow:o.overflow,fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:e(k)}),re({header:m(()=>[o.$slots.title?g(o.$slots,"title",{key:1}):g(o.$slots,"header",{key:0,close:e(k),titleId:e(v),titleClass:e(r).e("title")})]),default:m(()=>[g(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:m(()=>[g(o.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[ie,e(s)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Fe=V(Ae,[["__file","dialog.vue"]]);const Be=de(Fe);export{Be as E};
