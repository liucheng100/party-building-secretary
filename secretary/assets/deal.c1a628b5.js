import"./base.f53242fc.js";import{E as uu}from"./el-overlay.9d4f2757.js";import{E as eu}from"./el-date-picker.1955dd21.js";import"./el-input.3ea4f725.js";import"./el-scrollbar.e37e4d17.js";import"./el-popper.ce331693.js";import{E as lu}from"./el-button.a72bc0cf.js";import{E as au,a as tu,b as su}from"./el-select.442cf58e.js";import{E as ou,a as I}from"./el-checkbox.750bba3b.js";import{a as nu,s as ru,v as vu,r as t,z as iu,ay as du,o as m,A as h,f as n,k as l,w as s,F as R,B as T,e as Au,j as E,t as P,u as B,a8 as Fu,az as cu,i as pu,H as Eu,I as gu}from"./index.5abe98c9.js";import{m as $,E as y}from"./index.ae692c96.js";import{_ as mu}from"./plugin-vue_export-helper.21dcd24c.js";function Bu(r){return $.get({url:"/api/process/filter",params:{processId:r}})}function Cu(r){return $.post({url:"/api/process/updateBatch",data:r})}const V=r=>(Eu("data-v-3420efda"),r=r(),gu(),r),bu={class:"container"},fu={class:"head"},_u=V(()=>n("span",null,"\u5F53\u524D\u9636\u6BB5 ",-1)),Du=V(()=>n("span",null,"\u6B32\u901A\u8FC7\u7684\u9636\u6BB5 ",-1)),hu=E("\u901A\u8FC7\u9009\u4E2D\u6210\u5458"),yu={class:"Main"},Vu=E("\u901A\u8FC7"),ku={class:"modal"},wu={key:0,style:{display:"flex"}},xu=V(()=>n("div",{class:"font-4"},"\u6279\u91CF\u586B\u5199\uFF1A",-1)),Yu=E("\u586B\u5199"),Mu={class:"modal-tail"},Su=E("\u786E\u8BA4\u66F4\u6539"),zu=V(()=>n("div",{style:{color:"#c7242f","margin-top":"5px"}}," *\u672C\u64CD\u4F5C\u65E0\u6CD5\u56DE\u9000\uFF0C\u8BF7\u786E\u8BA4\u65E0\u8BEF\u540E\u518D\u64CD\u4F5C ",-1)),Hu=nu({__name:"deal",setup(r){ru(),vu();const v=t(0),A=t(0);t("");const C=t(!1),k=t(!0),w=t(""),M=[{label:"\u5165\u515A\u7533\u8BF7\u4EBA\u524D",value:0},{label:"\u5165\u515A\u7533\u8BF7\u4EBA",value:1},{label:"\u5165\u515A\u79EF\u6781\u5206\u5B50",value:2},{label:"\u53D1\u5C55\u5BF9\u8C61",value:3},{label:"\u4E2D\u5171\u9884\u5907\u515A\u5458",value:4}],g=[[{label:"\u9012\u4EA4\u5165\u515A\u7533\u8BF7\u4E66",value:0,stage:0},{label:"\u5165\u515A\u7533\u8BF7\u4EBA",value:1,stage:1}],[{label:"\u53C2\u52A0\u5165\u515A\u7533\u8BF7\u4EBA\u5B66\u4E60\u5C0F\u7EC4",value:0,stage:2},{label:"\u7FA4\u56E2\u7EC4\u7EC7\u63A8\u4F18",value:1,stage:3},{label:"\u901A\u8FC7\u7F51\u4E0A\u7533\u8BF7\u4EBA\u57F9\u8BAD",value:2,stage:4},{label:"\u652F\u59D4\u4F1A\u5BA1\u8BAE\u5E76\u4E0A\u62A5\u652F\u90E8\u515A\u59D4\u7EC4\u7EC7",value:3,stage:5},{label:"\u5165\u515A\u79EF\u6781\u5206\u5B50",value:4,stage:6}],[{label:"\u901A\u8FC7\u9662\u7EA7\u79EF\u6781\u5206\u5B50\u57F9\u8BAD",value:0,stage:7},{label:"\u6309\u5B63\u5EA6\u9012\u4EA4\u601D\u60F3\u6C47\u62A5",value:1,stage:8},{label:"\u786E\u5B9A\u57F9\u517B\u8054\u7CFB\u4EBA",value:2,stage:9},{label:"\u652F\u90E8\u8003\u5BDF",value:3,stage:10},{label:"\u542C\u53D6\u515A\u5458\u610F\u89C1",value:4,stage:11},{label:"\u5F81\u6C42\u7FA4\u4F17\u610F\u89C1",value:5,stage:12},{label:"\u5F81\u6C42\u515A\u5C0F\u7EC4\u3001\u8054\u7CFB\u4EBA\u610F\u89C1",value:6,stage:13},{label:"\u652F\u90E8\u4F1A\u8BA8\u8BBA\u5E76\u4E0A\u62A5\u4E0A\u7EA7\u515A\u59D4\u5907\u6848",value:7,stage:14},{label:"\u53D1\u5C55\u5BF9\u8C61",value:8,stage:15}],[{label:"\u786E\u5B9A2\u540D\u6B63\u5F0F\u515A\u5458\u4E3A\u4ECB\u7ECD\u4EBA",value:0,stage:16},{label:"\u653F\u5BA1",value:2,stage:17},{label:"\u64B0\u5199\u4E2A\u4EBA\u81EA\u4F20",value:1,stage:18},{label:"\u901A\u8FC7\u53D1\u5C55\u5BF9\u8C61\u515A\u6821\u57F9\u8BAD",value:3,stage:19},{label:"\u6750\u6599\u9F50\u5168",value:4,stage:20},{label:"\u652F\u90E8\u7EFC\u5408\u5BA1\u67E5",value:5,stage:21},{label:"\u4E0A\u7EA7\u515A\u59D4\u9884\u5BA1\u5E76\u516C\u793A",value:6,stage:22},{label:"\u586B\u5199\u5165\u515A\u7533\u8BF7\u4E66",value:7,stage:23},{label:"\u515A\u5458\u53D1\u5C55\u5927\u4F1A",value:8,stage:24},{label:"\u515A\u59D4\u8C08\u8BDD\u3001\u5BA1\u6279",value:9,stage:25},{label:"\u62A5\u518D\u4E0A\u4E00\u7EA7\u515A\u59D4\u7EC4\u7EC7\u90E8\u95E8\u5907\u6848",value:10,stage:26},{label:"\u4E2D\u5171\u9884\u5907\u515A\u5458",value:11,stage:27}],[{label:"\u5165\u515A\u5BA3\u8A93",value:0,stage:28},{label:"\u901A\u8FC7\u9884\u5907\u515A\u5458\u57F9\u8BAD",value:1,stage:29},{label:"\u5B63\u5EA6\u9012\u4EA4\u4E2A\u4EBA\u5C0F\u7ED3",value:2,stage:30},{label:"\u53C2\u52A0\u7EC4\u7EC7\u751F\u6D3B",value:3,stage:31},{label:"\u652F\u90E8\u6309\u5B63\u5EA6\u8FDB\u884C\u8003\u5BDF",value:4,stage:32},{label:"\u63D0\u51FA\u8F6C\u6B63\u7533\u8BF7",value:5,stage:33},{label:"\u5F81\u6C42\u515A\u5458\u3001\u7FA4\u4F17\u610F\u89C1",value:6,stage:34},{label:"\u542C\u53D6\u515A\u5C0F\u7EC4\u3001\u4ECB\u7ECD\u4EBA\u610F\u89C1",value:7,stage:35},{label:"\u8F6C\u6B63\u516C\u793A",value:8,stage:36},{label:"\u8F6C\u6B63\u5927\u4F1A",value:9,stage:37},{label:"\u515A\u59D4\u5BA1\u6279",value:10,stage:38},{label:"\u515A\u5458\u4E66\u8BB0\u8C08\u8BDD",value:11,stage:39},{label:"\u4E2D\u5171\u515A\u5458",value:12,stage:40}]],S=[{label:"\u9012\u4EA4\u5165\u515A\u7533\u8BF7\u4E66",value:0,stage:0},{label:"\u7FA4\u56E2\u7EC4\u7EC7\u63A8\u4F18",value:1,stage:3},{label:"\u5165\u515A\u79EF\u6781\u5206\u5B50",value:4,stage:6},{label:"\u53D1\u5C55\u5BF9\u8C61",value:8,stage:15},{label:"\u653F\u5BA1",value:2,stage:17},{label:"\u515A\u5458\u53D1\u5C55\u5927\u4F1A",value:8,stage:24}],b=t([]),F=t([]),j=t(),x=t([]),i=t(15);let f=t([]),z=t(0),o=t(1);const _=async a=>{a&&(A.value=0);let u=await Bu(g[v.value][A.value].stage);u.code===0?(f.value=u.data,z.value=u.data.length,b.value=f.value.slice((o.value-1)*i.value,o.value*i.value)):y.error(u.msg+":"+u.code)},q=async()=>{F.value=x.value,k.value=!0;for(let a of S)if(g[v.value][A.value].stage==a.stage){H();return}F.value.forEach(a=>{a.passAt=""}),Y(!1)},L=a=>{F.value=[a],k.value=!1;for(let u of S)if(g[v.value][A.value].stage==u.stage){H();return}F.value.forEach(u=>{u.passAt=""}),Y(!1)},Y=async a=>{if(a){for(let c of F.value)if(!c.passAt){y.error("\u4E0D\u80FD\u4E3A\u7A7A");return}}let u=[];F.value.forEach(c=>{u.push({userId:c.id,progressId:g[v.value][A.value].stage,status:1,passAt:c.passAt})});let p=await Cu(u);p.code==0?(y.success("\u4FEE\u6539\u6210\u529F"),_(!1),Q()):y.error(p.msg+":"+p.code)},O=()=>{b.value=f.value.slice((o.value-1)*i.value,o.value*i.value)},G=()=>{b.value=f.value.slice((o.value-1)*i.value,o.value*i.value)};iu(()=>{_(!0)});const J=a=>{x.value=a},K=()=>{x.value.forEach(a=>{a.passAt=w.value})},H=()=>{C.value=!0},Q=()=>{C.value=!1};return(a,u)=>{const p=au,c=tu,D=lu,d=ou,W=su,X=du,N=eu,Z=uu;return m(),h("div",bu,[n("div",fu,[n("div",null,[_u,l(c,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=e=>v.value=e),class:"m-2",placeholder:"Select",style:{"margin-left":"30px"},onChange:u[1]||(u[1]=e=>_(!0))},{default:s(()=>[(m(),h(R,null,T(M,e=>l(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",null,[Du,l(c,{modelValue:A.value,"onUpdate:modelValue":u[2]||(u[2]=e=>A.value=e),class:"m-2",placeholder:"Select",style:{"margin-left":"30px"},onChange:u[3]||(u[3]=e=>_(!1))},{default:s(()=>[(m(!0),h(R,null,T(g[v.value],e=>(m(),Au(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(D,{style:{"margin-left":"30px"},color:"#c7242f",onClick:u[4]||(u[4]=e=>q())},{default:s(()=>[hu]),_:1})])]),n("div",yu,[l(B(I),{ref_key:"multipleTableRef",ref:j,data:b.value,style:{width:"100%",height:"100%"},"header-cell-style":{background:"#FFF8F9",color:"#2F2F2F"},onSelectionChange:J},{default:s(()=>[l(d,{type:"selection"}),l(d,{label:"\u59D3\u540D"},{default:s(e=>[E(P(e.row.userName),1)]),_:1}),l(d,{property:"sno",label:"\u5B66\u53F7"}),l(d,{property:"identity",label:"\u8EAB\u4EFD"},{default:s(()=>[E(P(M[v.value].label),1)]),_:1}),l(d,{label:"\u64CD\u4F5C"},{default:s(e=>[l(D,{style:{color:"#21b339"},link:"",onClick:U=>L(e.row)},{default:s(()=>[Vu]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(X,{locale:B(cu),class:"tail"},{default:s(()=>[l(W,{small:"",class:"el-pagination","current-page":B(o),"onUpdate:current-page":u[5]||(u[5]=e=>Fu(o)?o.value=e:o=e),"page-size":i.value,"onUpdate:page-size":u[6]||(u[6]=e=>i.value=e),style:{margin:"20px"},background:"",layout:"total, ->,sizes, prev, pager, next, jumper",total:B(z),onSizeChange:O,onCurrentChange:G},null,8,["current-page","page-size","total"])]),_:1},8,["locale"]),l(Z,{modelValue:C.value,"onUpdate:modelValue":u[9]||(u[9]=e=>C.value=e),title:"\u8BF7\u586B\u5199\u4EE5\u4E0B\u6210\u5458\u53D8\u66F4\u65F6\u95F4\uFF1A",width:"35%"},{default:s(()=>[n("div",ku,[k.value?(m(),h("div",wu,[xu,l(N,{modelValue:w.value,"onUpdate:modelValue":u[7]||(u[7]=e=>w.value=e),type:"datetime",size:"small",format:"YYYY-MM-DD-HH:mm","value-format":"YYYY-MM-DDTHH:mm:ss.sss"},null,8,["modelValue"]),l(D,{color:"#c7242f",style:{width:"50px",height:"24px"},onClick:K},{default:s(()=>[Yu]),_:1})])):pu("",!0),l(B(I),{style:{width:"90%",margin:"20px"},"max-height":"50vh",size:"small","cell-style":{padding:"2px",fontSize:"13px"},data:F.value,"header-cell-style":{background:"#FFF8F9",color:"#2F2F2F"}},{default:s(()=>[l(d,{prop:"userName",label:"\u59D3\u540D","min-width":"30%"}),l(d,{prop:"sno",label:"\u5B66\u53F7","min-width":"45%"}),l(d,{label:"\u72B6\u6001\u53D8\u66F4\u65F6\u95F4",prop:"passAt"},{default:s(e=>[l(N,{type:"datetime",size:"small",modelValue:e.row.passAt,"onUpdate:modelValue":U=>e.row.passAt=U,format:"YYYY-MM-DD-HH:mm","value-format":"YYYY-MM-DDTHH:mm:ss.sss"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),n("div",Mu,[l(D,{color:"#c7242f",onClick:u[8]||(u[8]=e=>Y(!0))},{default:s(()=>[Su]),_:1}),zu])])]),_:1},8,["modelValue"])])}}});var Ju=mu(Hu,[["__scopeId","data-v-3420efda"]]);export{Ju as default};
