import{aT as J,a as _,c as M,U as Y,F as D,aU as X,ax as A,b as B,ac as C,d as Z,g as P,p as x,aV as Q,as as h,aE as F,r as E,aJ as ee,J as oe,G as ne,ak as te,aW as le,aO as I}from"./index.6e34900c.js";import{t as se,q as k,r as ae,s as ue,v as ie,i as de,U as R,g as w,a as re}from"./base.45a05a23.js";import{g as ce}from"./scroll.3ba02326.js";import{i as fe}from"./el-popper.67d0705d.js";var p=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(p||{});const ye=(e,o={})=>{J(e)||se("[useLockscreen]","You need to pass a ref param to this function");const s=o.ns||_("popup"),i=M(()=>s.bm("parent","hidden"));if(!Y||k(document.body,i.value))return;let t=0,a=!1,n="0";const r=()=>{setTimeout(()=>{typeof document!="undefined"&&(ie(document==null?void 0:document.body,i.value),a&&document&&(document.body.style.width=n))},200)};D(e,c=>{if(!c){r();return}a=!k(document.body,i.value),a&&(n=document.body.style.width),t=ce(s.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,f=ae(document.body,"overflowY");t>0&&(u||f==="scroll")&&a&&(document.body.style.width=`calc(100% - ${t}px)`),ue(document.body,i.value)}),X(()=>r())},me=e=>{if(!e)return{onClick:A,onMousedown:A,onMouseup:A};let o=!1,s=!1;return{onClick:n=>{o&&s&&e(n),o=s=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{s=n.target===n.currentTarget}}},ve=B({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),Ee={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=Z({name:"ElOverlay",props:ve,emits:Ee,setup(e,{slots:o,emit:s}){const i=_(pe),t=c=>{s("click",c)},{onClick:a,onMousedown:n,onMouseup:r}=me(e.customMaskEvent?void 0:t);return()=>e.mask?P("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:n,onMouseup:r},[x(o,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const Me=Ce,Te=B({center:Boolean,alignCenter:Boolean,closeIcon:{type:de},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),De={close:()=>!0},Be=B({...Te,appendToBody:Boolean,appendTo:{type:C([String,Object]),default:"body"},beforeClose:{type:C(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Le={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[R]:e=>h(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ne=(e,o)=>{var s;const t=te().emit,{nextZIndex:a}=F();let n="";const r=w(),c=w(),u=E(!1),f=E(!1),v=E(!1),T=E((s=e.zIndex)!=null?s:a());let y,m;const H=ee("namespace",le),U=M(()=>{const l={},d=`--${H.value}-dialog`;return e.fullscreen||(e.top&&(l[`${d}-margin-top`]=e.top),e.width&&(l[`${d}-width`]=re(e.width))),l}),z=M(()=>e.alignCenter?{display:"flex"}:{});function G(){t("opened")}function V(){t("closed"),t(R,!1),e.destroyOnClose&&(v.value=!1)}function g(){t("close")}function L(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=I(()=>N(),e.openDelay):N()}function S(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=I(()=>O(),e.closeDelay):O()}function b(){function l(d){d||(f.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(l):S()}function K(){e.closeOnClickModal&&b()}function N(){!Y||(u.value=!0)}function O(){u.value=!1}function W(){t("openAutoFocus")}function $(){t("closeAutoFocus")}function j(l){var d;((d=l.detail)==null?void 0:d.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&ye(u);function q(){e.closeOnPressEscape&&b()}return D(()=>e.modelValue,l=>{l?(f.value=!1,L(),v.value=!0,T.value=fe(e.zIndex)?a():T.value++,oe(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):u.value&&S()}),D(()=>e.fullscreen,l=>{!o.value||(l?(n=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=n)}),ne(()=>{e.modelValue&&(u.value=!0,v.value=!0,L())}),{afterEnter:G,afterLeave:V,beforeLeave:g,handleClose:b,onModalClick:K,close:S,doClose:O,onOpenAutoFocus:W,onCloseAutoFocus:$,onCloseRequested:q,onFocusoutPrevented:j,titleId:r,bodyId:c,closed:f,style:U,overlayDialogStyle:z,rendered:v,visible:u,zIndex:T}};export{Me as E,Le as a,Te as b,De as c,Be as d,me as e,Ne as u};
